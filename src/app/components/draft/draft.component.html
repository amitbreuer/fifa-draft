<div class="draft-container">
  @if (draftSettings) {
  <div class="draft-header">
    <p-card class="draft-info-card">
      <div class="draft-info">
        <div class="current-turn">
          <h2>{{ getCurrentManagerName() }}'s Turn</h2>
          <p-tag
            [value]="'Round ' + draftSettings.currentRound + ' of ' + draftSettings.maxRounds"
            severity="info"
            class="round-tag"
          ></p-tag>
        </div>

        <div class="draft-progress">
          <label>Draft Progress:</label>
          <p-progressBar
            [value]="getDraftProgress()"
            [showValue]="true"
            unit="%"
          ></p-progressBar>
        </div>

        <div class="turn-actions">
          <p-button
            label="Undo"
            icon="pi pi-undo"
            severity="secondary"
            [disabled]="!canUndo()"
            (onClick)="undoPlacement()"
          ></p-button>

          <p-button
            label="Finish Turn"
            icon="pi pi-check"
            severity="primary"
            [disabled]="!canFinishTurn()"
            (onClick)="finishTurn()"
          ></p-button>

          <p-button
            label="Finish Draft"
            icon="pi pi-flag"
            severity="danger"
            (onClick)="confirmFinishDraft()"
            class="p-button-warning"
          ></p-button>
        </div>
      </div>
    </p-card>
  </div>
  }

  <div class="draft-content">
    <div class="content-row">
      <div class="players-section">
        <app-player-table></app-player-table>
      </div>

      <div class="team-section">
        <app-field></app-field>
      </div>
    </div>
  </div>

  @if (draftSettings) {
  <div class="managers-overview">
    <p-card header="Draft Overview" class="overview-card">
      <div class="managers-grid">
        @for (manager of draftSettings.managers; track manager.id; let i = $index) {
        <div
          class="manager-card"
          [class.current-manager]="i === draftSettings.currentManagerIndex"
        >
          <div class="manager-header">
            <h4>{{ manager.name }}</h4>
            <p-tag
              [value]="manager.team.length + ' players'"
              [severity]="getManagerTagSeverity(i)"
            ></p-tag>
          </div>
          <div class="manager-stats">
            <small>Players drafted: {{ manager.team.length }}</small>
          </div>
        </div>
        }
      </div>
    </p-card>
  </div>
  }
</div>

<p-confirmDialog></p-confirmDialog>
